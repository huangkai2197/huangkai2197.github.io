

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="HK_2197">
  <meta name="keywords" content="">
  
    <meta name="description" content="MySQL基础一、数据库概述与MySQL安装篇1.1 数据库与数据库管理系统数据库的相关概念  DB：数据库（Database） DBMS：数据库管理系统（Database Management System） SQL：结构化查询语言（Structured Query Language）  数据库与数据管理系统的关系 ​		数据库管理系统(DBMS)可以管理多个数据库，一般开发人员会针对每一个应用">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL基础">
<meta property="og:url" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="MySQL基础一、数据库概述与MySQL安装篇1.1 数据库与数据库管理系统数据库的相关概念  DB：数据库（Database） DBMS：数据库管理系统（Database Management System） SQL：结构化查询语言（Structured Query Language）  数据库与数据管理系统的关系 ​		数据库管理系统(DBMS)可以管理多个数据库，一般开发人员会针对每一个应用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403083821801.png">
<meta property="og:image" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403084258861.png">
<meta property="og:image" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403085405211.png">
<meta property="og:image" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403085740121.png">
<meta property="og:image" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403090816599.png">
<meta property="og:image" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403090935762.png">
<meta property="og:image" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403093930404.png">
<meta property="og:image" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403094123525.png">
<meta property="og:image" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403094222360.png">
<meta property="og:image" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403103349723.png">
<meta property="article:published_time" content="2023-04-03T03:27:30.402Z">
<meta property="article:modified_time" content="2023-04-03T03:32:21.381Z">
<meta property="article:author" content="HK_2197">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403083821801.png">
  
  
  
  <title>MySQL基础 - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>HK&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default2.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="MySQL基础"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-04-03 11:27" pubdate>
          2023年4月3日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          13k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          110 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">MySQL基础</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="MySQL基础"><a href="#MySQL基础" class="headerlink" title="MySQL基础"></a>MySQL基础</h1><h3 id="一、数据库概述与MySQL安装篇"><a href="#一、数据库概述与MySQL安装篇" class="headerlink" title="一、数据库概述与MySQL安装篇"></a>一、数据库概述与MySQL安装篇</h3><h5 id="1-1-数据库与数据库管理系统"><a href="#1-1-数据库与数据库管理系统" class="headerlink" title="1.1 数据库与数据库管理系统"></a>1.1 数据库与数据库管理系统</h5><p><strong>数据库的相关概念</strong></p>
<ul>
<li>DB：数据库（Database）</li>
<li>DBMS：数据库管理系统（Database Management System）</li>
<li>SQL：结构化查询语言（Structured Query Language）</li>
</ul>
<p><strong>数据库与数据管理系统的关系</strong></p>
<p>​		数据库管理系统(DBMS)可以管理多个数据库，一般开发人员会针对每一个应用创建一个数据库。为保存应用中实体的数据，一般会在数据库创建多个表，以保存程序中实体用户的数据。 </p>
<img src="/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403083821801.png" srcset="/img/loading.gif" lazyload class title="image-20230403083821801">

<h5 id="1-2-关系型数据库（RDBMS）"><a href="#1-2-关系型数据库（RDBMS）" class="headerlink" title="1.2 关系型数据库（RDBMS）"></a>1.2 关系型数据库（RDBMS）</h5><p>​		关系型数据库模型是把复杂的数据结构归结为简单的<code>二元关系</code>（即二维表格形式）。以<code>行(row)</code>和<code>列(column)</code>的形式存储数据，以便于用户理解。这一系列的行和列被称为<code>表(table)</code>，一组表组成了一个库(database)。SQL 是关系型数据库的查询语言。</p>
<img src="/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403084258861.png" srcset="/img/loading.gif" lazyload class title="image-20230403084258861">

<p>优势：<strong>复杂查询</strong>可以用SQL语句方便的在一个表以及多个表之间做非常复杂的数据查询。<strong>事务支持</strong>使得对于安全性能很高的数据访问要求得以实现。</p>
<h5 id="1-3-非关系型数据库-非RDBMS"><a href="#1-3-非关系型数据库-非RDBMS" class="headerlink" title="1.3 非关系型数据库(非RDBMS)"></a>1.3 非关系型数据库(非RDBMS)</h5><p>​		<strong>非关系型数据库</strong>，可看成传统关系型数据库的功能<code>阉割版本</code>，基于键值对存储数据，不需要经过SQL层的解析，<code>性能非常高</code>。同时，通过减少不常用的功能，进一步提高性能。</p>
<p>​		非关系型数据库有：<strong>键值型数据库</strong>（Redis）、<strong>文档型数据库</strong>（MongoDB）、<strong>搜索引擎数据库</strong>（Elasticsearch）、<strong>列式数据库</strong>（HBase）、<strong>图形数据库</strong>（Neo4J、InfoGrid）</p>
<h5 id="1-4-关系型数据库设计规则"><a href="#1-4-关系型数据库设计规则" class="headerlink" title="1.4 关系型数据库设计规则"></a>1.4 关系型数据库设计规则</h5><ul>
<li><p>关系型数据库的典型数据结构就是<code>数据表</code>，这些数据表的组成都是结构化的（Structured）。</p>
</li>
<li><p>将数据放到表中，表再放到库中。</p>
</li>
<li><p>一个数据库中可以有多个表，每个表都有一个名字，用来标识自己。表名具有唯一性。</p>
</li>
<li><p>表具有一些特性，这些特性定义了数据在表中如何存储，类似Java和Python中 “类”的设计。</p>
</li>
</ul>
<p><strong>表、记录、字段</strong></p>
<p>​		E-R（entity-relationship，实体-联系）模型中有三个主要概念是：<code>实体集</code>、<code>属性</code>、<code>联系集</code>。一个实体集（class）对应于数据库中的一个表（table），一个实体（instance）则对应于数据库表中的一行（row），也称为一条记录（record）。一个属性（attribute）对应于数据库表中的一列（column），也称为一个字段（field）。</p>
<img src="/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403085405211.png" srcset="/img/loading.gif" lazyload class title="image-20230403085405211">

<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs clean">ORM思想 (Object Relational Mapping)体现：<br>数据库中的一个表  &lt;---&gt; Java或Python中的一个类<br>表中的一条数据  &lt;---&gt; 类中的一个对象（或实体）<br>表中的一个列  &lt;----&gt; 类中的一个字段、属性(field)<br></code></pre></td></tr></table></figure>

<h5 id="1-5-表的关联关系"><a href="#1-5-表的关联关系" class="headerlink" title="1.5 表的关联关系"></a>1.5 表的关联关系</h5><h6 id="1-5-1一对一关联"><a href="#1-5-1一对一关联" class="headerlink" title="1.5.1一对一关联"></a>1.5.1一对一关联</h6><p>​		在实际的开发中应用不多，因为一对一可以创建成一张表。</p>
<p>举例：设计<code>学生表</code>：学号、姓名、手机号码、班级、系别、身份证号码、家庭住址、籍贯、紧急联系人、…</p>
<ul>
<li><p>拆为两个表：两个表的记录是一一对应关系。</p>
</li>
<li><p><code>基础信息表</code>（常用信息）：学号、姓名、手机号码、班级、系别</p>
</li>
<li><p><code>档案信息表</code>（不常用信息）：学号、身份证号码、家庭住址、籍贯、紧急联系人、…</p>
</li>
</ul>
<img src="/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403085740121.png" srcset="/img/loading.gif" lazyload class title="image-20230403085740121">

<ul>
<li>外键唯一：主表的主键和从表的外键（唯一），形成主外键关系，外键唯一。 </li>
<li>外键是主键：主表的主键和从表的主键，形成主外键关系。</li>
</ul>
<h6 id="1-5-2一对多"><a href="#1-5-2一对多" class="headerlink" title="1.5.2一对多"></a>1.5.2一对多</h6><p>常见实例场景：<code>客户表和订单表</code>，<code>分类表和商品表</code>，<code>部门表和员工表</code>。</p>
<p>举例：</p>
<ul>
<li><p>员工表：编号、姓名、…、所属部门</p>
</li>
<li><p>部门表：编号、名称、简介</p>
</li>
</ul>
<img src="/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403090816599.png" srcset="/img/loading.gif" lazyload class title="image-20230403090816599">

<h6 id="1-5-3多对多"><a href="#1-5-3多对多" class="headerlink" title="1.5.3多对多"></a>1.5.3多对多</h6><p>​		要表示多对多关系，必须创建第三个表，该表通常称为<code>联接表</code>，它将多对多关系划分为两个一对多关系。将这两个表的主键都插入到第三个表中。</p>
<p><strong>举例1：学生-课程</strong></p>
<ul>
<li><p><code>学生信息表</code>：一行代表一个学生的信息（学号、姓名、手机号码、班级、系别…）</p>
</li>
<li><p><code>课程信息表</code>：一行代表一个课程的信息（课程编号、授课老师、简介…）</p>
</li>
<li><p><code>选课信息表</code>：一个学生可以选多门课，一门课可以被多个学生选择</p>
</li>
</ul>
<img src="/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403090935762.png" srcset="/img/loading.gif" lazyload class title="image-20230403090935762">

<h3 id="二、SQL之SELECT使用篇"><a href="#二、SQL之SELECT使用篇" class="headerlink" title="二、SQL之SELECT使用篇"></a>二、SQL之SELECT使用篇</h3><h5 id="2-1SQL语言的规则与规范"><a href="#2-1SQL语言的规则与规范" class="headerlink" title="2.1SQL语言的规则与规范"></a>2.1SQL语言的规则与规范</h5><p><strong>SQL概述</strong></p>
<p>SQL（Structured Query Language，结构化查询语言）是使用关系模型的数据库应用语言，<code>与数据直接打交道</code>。</p>
<p>SQL语言在功能上主要分为如下3大类：</p>
<ul>
<li><p><strong>DDL（Data Definition Languages、数据定义语言）</strong>，这些语句定义了不同的数据库、表、视图、索引等数据库对象，还可以用来创建、删除、修改数据库和数据表的结构。</p>
<ul>
<li>主要的语句关键字包括<code>CREATE</code>、<code>DROP</code>、<code>ALTER</code>等。</li>
</ul>
</li>
<li><p><strong>DML（Data Manipulation Language、数据操作语言）</strong>，用于添加、删除、更新和查询数据库记录，并检查数据完整性。</p>
<ul>
<li>主要的语句关键字包括<code>INSERT</code>、<code>DELETE</code>、<code>UPDATE</code>、<code>SELECT</code>等。</li>
<li><strong>SELECT是SQL语言的基础，最为重要。</strong></li>
</ul>
</li>
<li><p><strong>DCL（Data Control Language、数据控制语言）</strong>，用于定义数据库、表、字段、用户的访问权限和安全级别。</p>
<ul>
<li>主要的语句关键字包括<code>GRANT</code>、<code>REVOKE</code>、<code>COMMIT</code>、<code>ROLLBACK</code>、<code>SAVEPOINT</code>等。</li>
</ul>
</li>
</ul>
<p>因为查询语句使用的非常的频繁，所以很多人把查询语句单拎出来一类：DQL（数据查询语言）。</p>
<p><strong>规则与规范</strong></p>
<ul>
<li><p>SQL 可以写在一行或者多行。为了提高可读性，各子句分行写，必要时使用缩进</p>
</li>
<li><p>每条命令以 ; 结束</p>
</li>
<li><p>关于标点符号</p>
<ul>
<li>必须保证所有的()、单引号、双引号是成对结束的</li>
<li>必须使用英文状态下的半角输入方式</li>
<li>字符串型和日期时间类型的数据可以使用单引号（’ ‘）表示</li>
<li>列的别名，尽量使用双引号（” “），而且不建议省略as</li>
</ul>
</li>
<li><p><strong>MySQL 在 Windows 环境下是大小写不敏感的</strong></p>
</li>
<li><p><strong>MySQL 在 Linux 环境下是大小写敏感的</strong></p>
<ul>
<li>数据库名、表名、表的别名、变量名是严格区分大小写的</li>
<li>关键字、函数名、列名(或字段名)、列的别名(字段的别名) 是忽略大小写的。</li>
</ul>
</li>
<li><p><strong>推荐采用统一的书写规范：</strong></p>
<ul>
<li>数据库名、表名、表别名、字段名、字段别名等都小写</li>
<li>SQL 关键字、函数名、绑定变量等都大写</li>
</ul>
</li>
</ul>
<p>可以使用如下格式的注释结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">单行注释：#注释文字(MySQL特有的方式)<br>单行注释：-- 注释文字(--后面必须包含一个空格。)<br>多行注释：/* 注释文字  */<br></code></pre></td></tr></table></figure>

<h5 id="2-2-基本的SELECT语句"><a href="#2-2-基本的SELECT语句" class="headerlink" title="2.2 基本的SELECT语句"></a>2.2 基本的SELECT语句</h5><p><strong>语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 选择哪些列  <span class="hljs-keyword">FROM</span> 从哪个表中选择;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> departments; <span class="hljs-comment">-- 选择全部列</span><br></code></pre></td></tr></table></figure>

<p><strong>给列起别名</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> last_name <span class="hljs-keyword">AS</span> name, commission_pct comm<br><span class="hljs-keyword">FROM</span>   employees;<br></code></pre></td></tr></table></figure>

<p><strong>使用关键字DISTINCT去除重复行</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> department_id<br><span class="hljs-keyword">FROM</span> employees;<br></code></pre></td></tr></table></figure>

<p><strong>空值参与运算</strong></p>
<p>所有运算符或列值遇到null值，<strong>运算的结果都为null</strong></p>
<p><strong>着重号</strong></p>
<p>​		我们需要保证表中的字段、表名等没有和保留字、数据库系统或常用方法冲突。如果真的相同，请在SQL语句中使用一对&#96;&#96;（着重号）引起来</p>
<p><strong>查询表结构</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DESCRIBE</span> employees;<br>或<br><span class="hljs-keyword">DESC</span> employees;<br></code></pre></td></tr></table></figure>

<p><strong>过滤数据</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 字段<span class="hljs-number">1</span>,字段<span class="hljs-number">2</span><br><span class="hljs-keyword">FROM</span> 表名<br><span class="hljs-keyword">WHERE</span> 过滤条件<br></code></pre></td></tr></table></figure>

<h5 id="2-3运算符"><a href="#2-3运算符" class="headerlink" title="2.3运算符"></a>2.3运算符</h5><p>​		<strong>算术运算符</strong>：主要用于数学运算，其可以连接运算符前后的两个数值或表达式，对数值或表达式进行加（+）、减（-）、乘（*）、除（&#x2F;）和取模（%）运算。</p>
<p>​		<strong>比较运算符</strong>：用来对表达式左边的操作数和右边的操作数进行比较，比较的结果为真则返回1，比较的结果为假则返回0，其他情况则返回NULL。比较运算符经常被用来作为SELECT查询语句的条件来使用，返回符合条件的结果记录。</p>
<img src="/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403093930404.png" srcset="/img/loading.gif" lazyload class title="image-20230403093930404">

<p><strong>非符号类型的运算符：</strong></p>
<img src="/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403094123525.png" srcset="/img/loading.gif" lazyload class title="image-20230403094123525">

<p> <strong>逻辑运算符：</strong></p>
<img src="/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403094222360.png" srcset="/img/loading.gif" lazyload class title="image-20230403094222360">

<h5 id="2-4-排序与分页"><a href="#2-4-排序与分页" class="headerlink" title="2.4 排序与分页"></a>2.4 排序与分页</h5><p><strong>排序规则</strong></p>
<ul>
<li>使用 ORDER BY 子句排序<ul>
<li><strong>ASC（ascend）: 升序</strong></li>
<li><strong>DESC（descend）:降序</strong></li>
</ul>
</li>
<li><strong>ORDER BY 子句在SELECT语句的结尾。</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 单列排序</span><br><span class="hljs-keyword">SELECT</span>   last_name, job_id, department_id, hire_date<br><span class="hljs-keyword">FROM</span>     employees<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> hire_date ;<br><span class="hljs-comment">-- 多列排序</span><br><span class="hljs-keyword">SELECT</span> last_name, department_id, salary<br><span class="hljs-keyword">FROM</span>   employees<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> department_id, salary <span class="hljs-keyword">DESC</span>;<br></code></pre></td></tr></table></figure>

<p><strong>分页</strong></p>
<p>分页原理：所谓分页显示，就是将数据库中的结果集，一段一段显示出来需要的条件。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">LIMIT [位置偏移量,] 行数 <span class="hljs-comment">-- LIMIT 子句必须放在整个SELECT语句的最后！</span><br></code></pre></td></tr></table></figure>

<h5 id="2-5-多表查询"><a href="#2-5-多表查询" class="headerlink" title="2.5 多表查询"></a>2.5 多表查询</h5><p>​		多表查询，也称为关联查询，指两个或更多个表一起完成查询操作。前提条件：这些一起查询的表之间是有关系的（一对一、一对多），它们之间一定是有关联字段，这个关联字段可能建立了外键，也可能没有建立外键。比如：员工表和部门表，这两个表依靠“部门编号”进行关联。</p>
<img src="/2023/04/03/MySQL%E5%9F%BA%E7%A1%80/image-20230403103349723.png" srcset="/img/loading.gif" lazyload class title="image-20230403103349723">

<p><strong>基本语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> table1.column, table2.column,table3.column<br><span class="hljs-keyword">FROM</span> table1<br><span class="hljs-keyword">JOIN</span> table2 <span class="hljs-keyword">ON</span> table1 和 table2 的连接条件<br><span class="hljs-keyword">JOIN</span> table3 <span class="hljs-keyword">ON</span> table2 和 table3 的连接条件<br></code></pre></td></tr></table></figure>

<p><strong>内连接</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 字段列表<br><span class="hljs-keyword">FROM</span> A表 <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> B表<br><span class="hljs-keyword">ON</span> 关联条件<br><span class="hljs-keyword">WHERE</span> 等其他子句;<br></code></pre></td></tr></table></figure>

<p><strong>左外连接(LEFT OUTER JOIN)</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 字段列表<br><span class="hljs-keyword">FROM</span> A表 <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> B表<br><span class="hljs-keyword">ON</span> 关联条件<br><span class="hljs-keyword">WHERE</span> 等其他子句;<br></code></pre></td></tr></table></figure>

<p><strong>右外连接(RIGHT OUTER JOIN)</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> 字段列表<br><span class="hljs-keyword">FROM</span> A表 <span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">JOIN</span> B表<br><span class="hljs-keyword">ON</span> 关联条件<br><span class="hljs-keyword">WHERE</span> 等其他子句;<br></code></pre></td></tr></table></figure>

<h5 id="2-6-MySQL函数"><a href="#2-6-MySQL函数" class="headerlink" title="2.6 MySQL函数"></a>2.6 MySQL函数</h5><p>​		MySQL提供了丰富的内置函数，这些函数使得数据的维护与管理更加方便，能够更好地提供数据的分析与统计功能，在一定程度上提高了开发人员进行数据分析与统计的效率。</p>
<ul>
<li>操作数据对象</li>
<li>接受参数返回一个结果</li>
<li><strong>只对一行进行变换</strong></li>
<li><strong>每行返回一个结果</strong></li>
<li>可以嵌套</li>
<li>参数可以是一列或一个值</li>
</ul>
<p><strong>数值型函数</strong></p>
<table>
<thead>
<tr>
<th>函数名称</th>
<th>作 用</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/abc.html">ABS</a></td>
<td>求绝对值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/sqrt.html">SQRT</a></td>
<td>求二次方根</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/mod.html">MOD</a></td>
<td>求余数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/ceil_celing.html">CEIL 和 CEILING</a></td>
<td>两个函数功能相同，都是返回不小于参数的最小整数，即向上取整</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/floor.html">FLOOR</a></td>
<td>向下取整，返回值转化为一个BIGINT</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/rand.html">RAND</a></td>
<td>生成一个0~1之间的随机数，传入整数参数是，用来产生重复序列</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/round.html">ROUND</a></td>
<td>对所传参数进行四舍五入</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/sign.html">SIGN</a></td>
<td>返回参数的符号</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/pow_power.html">POW 和 POWER</a></td>
<td>两个函数的功能相同，都是所传参数的次方的结果值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/sin.html">SIN</a></td>
<td>求正弦值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/asin.html">ASIN</a></td>
<td>求反正弦值，与函数 SIN 互为反函数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/cos.html">COS</a></td>
<td>求余弦值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/acos.html">ACOS</a></td>
<td>求反余弦值，与函数 COS 互为反函数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/tan.html">TAN</a></td>
<td>求正切值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/atan.html">ATAN</a></td>
<td>求反正切值，与函数 TAN 互为反函数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/cot.html">COT</a></td>
<td>求余切值</td>
</tr>
</tbody></table>
<p><strong>字符串函数</strong></p>
<table>
<thead>
<tr>
<th>函数名称</th>
<th>作 用</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/length.html">LENGTH</a></td>
<td>计算字符串长度函数，返回字符串的字节长度</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/concat.html">CONCAT</a></td>
<td>合并字符串函数，返回结果为连接参数产生的字符串，参数可以使一个或多个</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/insert.html">INSERT</a></td>
<td>替换字符串函数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/lower.html">LOWER</a></td>
<td>将字符串中的字母转换为小写</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/upper.html">UPPER</a></td>
<td>将字符串中的字母转换为大写</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/left.html">LEFT</a></td>
<td>从左侧字截取符串，返回字符串左边的若干个字符</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/right.html">RIGHT</a></td>
<td>从右侧字截取符串，返回字符串右边的若干个字符</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/trim.html">TRIM</a></td>
<td>删除字符串左右两侧的空格</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/replace.html">REPLACE</a></td>
<td>字符串替换函数，返回替换后的新字符串</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/substring.html">SUBSTRING</a></td>
<td>截取字符串，返回从指定位置开始的指定长度的字符换</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/reverse.html">REVERSE</a></td>
<td>字符串反转（逆序）函数，返回与原始字符串顺序相反的字符串</td>
</tr>
</tbody></table>
<p> <strong>日期和时间函数</strong></p>
<table>
<thead>
<tr>
<th>函数名称</th>
<th>作 用</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/curdate_current_date.html">CURDATE 和 CURRENT_DATE</a></td>
<td>两个函数作用相同，返回当前系统的日期值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/curtime_current_time.html">CURTIME 和 CURRENT_TIME</a></td>
<td>两个函数作用相同，返回当前系统的时间值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/now_sysdate.html">NOW 和 SYSDATE</a></td>
<td>两个函数作用相同，返回当前系统的日期和时间值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/unix_timestamp.html">UNIX_TIMESTAMP</a></td>
<td>获取UNIX时间戳函数，返回一个以 UNIX 时间戳为基础的无符号整数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/from_unixtime.html">FROM_UNIXTIME</a></td>
<td>将 UNIX 时间戳转换为时间格式，与UNIX_TIMESTAMP互为反函数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/month.html">MONTH</a></td>
<td>获取指定日期中的月份</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/monthname.html">MONTHNAME</a></td>
<td>获取指定日期中的月份英文名称</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/dayname.html">DAYNAME</a></td>
<td>获取指定曰期对应的星期几的英文名称</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/dayofweek.html">DAYOFWEEK</a></td>
<td>获取指定日期对应的一周的索引位置值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/week.html">WEEK</a></td>
<td>获取指定日期是一年中的第几周，返回值的范围是否为 0〜52 或 1〜53</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/dayofyear.html">DAYOFYEAR</a></td>
<td>获取指定曰期是一年中的第几天，返回值范围是1~366</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/dayofmonth.html">DAYOFMONTH</a></td>
<td>获取指定日期是一个月中是第几天，返回值范围是1~31</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/year.html">YEAR</a></td>
<td>获取年份，返回值范围是 1970〜2069</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/time_to_sec.html">TIME_TO_SEC</a></td>
<td>将时间参数转换为秒数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/sec_to_time.html">SEC_TO_TIME</a></td>
<td>将秒数转换为时间，与TIME_TO_SEC 互为反函数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/date_add_adddate.html">DATE_ADD 和 ADDDATE</a></td>
<td>两个函数功能相同，都是向日期添加指定的时间间隔</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/date_sub_subdate.html">DATE_SUB 和 SUBDATE</a></td>
<td>两个函数功能相同，都是向日期减去指定的时间间隔</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/addtime.html">ADDTIME</a></td>
<td>时间加法运算，在原始时间上添加指定的时间</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/subtime.html">SUBTIME</a></td>
<td>时间减法运算，在原始时间上减去指定的时间</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/datediff.html">DATEDIFF</a></td>
<td>获取两个日期之间间隔，返回参数 1 减去参数 2 的值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/date_format.html">DATE_FORMAT</a></td>
<td>格式化指定的日期，根据参数返回指定格式的值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/weekday.html">WEEKDAY</a></td>
<td>获取指定日期在一周内的对应的工作日索引</td>
</tr>
</tbody></table>
<p><strong>聚合函数</strong></p>
<table>
<thead>
<tr>
<th>函数名称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/max.html">MAX</a></td>
<td>查询指定列的最大值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/min.html">MIN</a></td>
<td>查询指定列的最小值</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/count.html">COUNT</a></td>
<td>统计查询结果的行数</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/sum.html">SUM</a></td>
<td>求和，返回指定列的总和</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/avg.html">AVG</a></td>
<td>求平均值，返回指定列数据的平均值</td>
</tr>
</tbody></table>
<p><strong>流程控制函数</strong></p>
<table>
<thead>
<tr>
<th>函数名称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/if.html">IF</a></td>
<td>判断，流程控制</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/ifnull.html">IFNULL</a></td>
<td>判断是否为空</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="http://c.biancheng.net/mysql/case.html">CASE</a></td>
<td>搜索语句</td>
</tr>
</tbody></table>
<h5 id="2-7-子查询"><a href="#2-7-子查询" class="headerlink" title="2.7 子查询"></a>2.7 子查询</h5><p>SQL语句中嵌套SELECT语句，称谓嵌套查询，又称子查询。<br><code>SELECT * FROM t1 WHERE column1 = ( SELECT column1 FROM t2);</code><br><strong>子查询外部的语句可以是 INSERT &#x2F; UPDATE &#x2F; DELETE &#x2F; SELECT 的任何一个</strong>  </p>
<p>根据子查询结果可以分为：</p>
<ul>
<li>标量子查询（子查询结果为单个值）</li>
<li>列子查询（子查询结果为一列）</li>
<li>行子查询（子查询结果为一行）</li>
<li>表子查询（子查询结果为多行多列）</li>
</ul>
<p>根据子查询位置可分为：</p>
<ul>
<li>WHERE 之后</li>
<li>FROM 之后</li>
<li>SELECT 之后</li>
</ul>
<p><strong>标量子查询</strong></p>
<p>子查询返回的结果是单个值（数字、字符串、日期等）。<br>常用操作符：- &lt; &gt; &gt; &gt;&#x3D; &lt; &lt;&#x3D;  </p>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查询销售部所有员工<br>select id from dept where name = &#x27;销售部&#x27;;<br>-- 根据销售部部门ID，查询员工信息<br>select * from employee where dept = 4;<br>-- 合并（子查询）  <br>select * from employee where dept = (select id from dept where name = &#x27;销售部&#x27;);  <br><br>-- 查询xxx入职之后的员工信息  <br>select * from employee where entrydate &gt; (select entrydate from employee where name = &#x27;xxx&#x27;);  <br></code></pre></td></tr></table></figure>

<p><strong>列子查询</strong></p>
<p>返回的结果是一列（可以是多行）。  </p>
<p>常用操作符：  </p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>IN</td>
<td>在指定的集合范围内，多选一</td>
</tr>
<tr>
<td>NOT IN</td>
<td>不在指定的集合范围内</td>
</tr>
<tr>
<td>ANY</td>
<td>子查询返回列表中，有任意一个满足即可</td>
</tr>
<tr>
<td>SOME</td>
<td>与ANY等同，使用SOME的地方都可以使用ANY</td>
</tr>
<tr>
<td>ALL</td>
<td>子查询返回列表的所有值都必须满足</td>
</tr>
</tbody></table>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查询销售部和市场部的所有员工信息  <br>select * from employee where dept in (select id from dept where name = &#x27;销售部&#x27; or name = &#x27;市场部&#x27;);<br>-- 查询比财务部所有人工资都高的员工信息<br>select * from employee where salary &gt; all(select salary from employee where dept = (select id from dept where name = &#x27;财务部&#x27;));<br>-- 查询比研发部任意一人工资高的员工信息<br>select * from employee where salary &gt; any (select salary from employee where dept = (select id from dept where name = &#x27;研发部&#x27;));<br></code></pre></td></tr></table></figure>

<p><strong>行子查询</strong></p>
<p>返回的结果是一行（可以是多列）。<br>常用操作符：&#x3D;, &lt;, &gt;, IN, NOT IN</p>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查询与xxx的薪资及直属领导相同的员工信息  <br>select * from employee where (salary, manager) = (12500, 1);  <br>select * from employee where (salary, manager) = (select salary, manager from employee where name = &#x27;xxx&#x27;);  <br></code></pre></td></tr></table></figure>

<p><strong>表子查询</strong></p>
<p>返回的结果是多行多列<br>常用操作符：IN  </p>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 查询与xxx1，xxx2的职位和薪资相同的员工<br>select * from employee where (job, salary) in (select job, salary from employee where name = &#x27;xxx1&#x27; or name = &#x27;xxx2&#x27;);<br>-- 查询入职日期是2006-01-01之后的员工，及其部门信息<br>select e.*, d.* from (select * from employee where entrydate &gt; &#x27;2006-01-01&#x27;) as e left join dept as d on e.dept = d.id;<br></code></pre></td></tr></table></figure>



<h3 id="三、SQL之DDL、DML、DCL使用篇"><a href="#三、SQL之DDL、DML、DCL使用篇" class="headerlink" title="三、SQL之DDL、DML、DCL使用篇"></a>三、SQL之DDL、DML、DCL使用篇</h3><h5 id="3-1DDL（数据定义语言）"><a href="#3-1DDL（数据定义语言）" class="headerlink" title="3.1DDL（数据定义语言）"></a>3.1DDL（数据定义语言）</h5><p><strong>数据库操作</strong></p>
<p>查询所有数据库:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">SHOW</span> DATABASES;<br></code></pre></td></tr></table></figure>

<p>查询当前数据库：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">SELECT</span> DATABASE();<br></code></pre></td></tr></table></figure>


<p>创建数据库：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE [ IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> ] 数据库名 [ <span class="hljs-keyword">DEFAULT</span> CHARSET 字符集] [<span class="hljs-keyword">COLLATE</span> 排序规则 ];  <br></code></pre></td></tr></table></figure>

<p>删除数据库:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> DATABASE [ IF <span class="hljs-keyword">EXISTS</span> ] 数据库名;<br></code></pre></td></tr></table></figure>

<p>  使用数据库：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE 数据库名;<br></code></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<ul>
<li>UTF8字符集长度为3字节，有些符号占4字节，所以推荐用<strong>utf8mb4字符集</strong></li>
</ul>
<p><strong>表操作</strong></p>
<p>查询当前数据库所有表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> TABLES;<br></code></pre></td></tr></table></figure>

<p>查询表结构：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DESC</span> 表名;<br></code></pre></td></tr></table></figure>

<p>查询指定表的建表语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> 表名;<br></code></pre></td></tr></table></figure>

<p>创建表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">CREATE TABLE 表名(<br>	字段1 字段1类型 [COMMENT 字段1注释],<br>	字段2 字段2类型 [COMMENT 字段2注释],<br>	字段3 字段3类型 [COMMENT 字段3注释],<br>	...<br>	字段n 字段n类型 [COMMENT 字段n注释]<br>)[ COMMENT 表注释 ];<br></code></pre></td></tr></table></figure>

<p><strong>最后一个字段后面没有逗号</strong></p>
<p>添加字段： </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 <span class="hljs-keyword">ADD</span> 字段名 类型(长度) [COMMENT 注释] [约束];` <br>例：<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> emp <span class="hljs-keyword">ADD</span> nickname <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>) COMMENT <span class="hljs-string">&#x27;昵称&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>修改数据类型： </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 MODIFY 字段名 新数据类型(长度);<br></code></pre></td></tr></table></figure>

<p>修改字段名和字段类型： </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];<br>例：将emp表的nickname字段修改为username，类型为<span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>)  <br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> emp CHANGE nickname username <span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>) COMMENT <span class="hljs-string">&#x27;昵称&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>删除字段：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 <span class="hljs-keyword">DROP</span> 字段名;<br></code></pre></td></tr></table></figure>

<p>修改表名：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 RENAME <span class="hljs-keyword">TO</span> 新表名<br></code></pre></td></tr></table></figure>

<p>删除表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> [IF <span class="hljs-keyword">EXISTS</span>] 表名;<br></code></pre></td></tr></table></figure>

<p>删除表，并重新创建该表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">TRUNCATE</span> <span class="hljs-keyword">TABLE</span> 表名;<br></code></pre></td></tr></table></figure>

<h5 id="3-2-DML（数据操作语言）"><a href="#3-2-DML（数据操作语言）" class="headerlink" title="3.2 DML（数据操作语言）"></a>3.2 DML（数据操作语言）</h5><p><strong>添加数据</strong></p>
<p>指定字段： </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> 表名 (字段名<span class="hljs-number">1</span>, 字段名<span class="hljs-number">2</span>, ...) <span class="hljs-keyword">VALUES</span> (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>, ...);<br></code></pre></td></tr></table></figure>

<p>全部字段： </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> 表名 <span class="hljs-keyword">VALUES</span> (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>, ...);<br></code></pre></td></tr></table></figure>

<p>批量添加数据：   </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> 表名 (字段名<span class="hljs-number">1</span>, 字段名<span class="hljs-number">2</span>, ...) <span class="hljs-keyword">VALUES</span> (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>, ...), (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>, ...), (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>, ...); <br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> 表名 <span class="hljs-keyword">VALUES</span> (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>, ...), (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>, ...), (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>, ...);` <br></code></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<ul>
<li>字符串和日期类型数据应该包含在引号中</li>
<li>插入的数据大小应该在字段的规定范围内</li>
</ul>
<p><strong>更新和删除数据</strong></p>
<p>修改数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> 表名 <span class="hljs-keyword">SET</span> 字段名<span class="hljs-number">1</span> <span class="hljs-operator">=</span> 值<span class="hljs-number">1</span>, 字段名<span class="hljs-number">2</span> <span class="hljs-operator">=</span> 值<span class="hljs-number">2</span>, ... [ <span class="hljs-keyword">WHERE</span> 条件 ]; <br>例: <span class="hljs-keyword">UPDATE</span> emp <span class="hljs-keyword">SET</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Jack&#x27;</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure>

<p>删除数据：  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> 表名 [ <span class="hljs-keyword">WHERE</span> 条件 ];<br></code></pre></td></tr></table></figure>

<h5 id="3-3-DCL-数据控制语言"><a href="#3-3-DCL-数据控制语言" class="headerlink" title="3.3 DCL(数据控制语言)"></a>3.3 DCL(数据控制语言)</h5><p>查询用户：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">USER mysql;<br>SELECT * FROM user;<br></code></pre></td></tr></table></figure>

<p>创建用户:  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;用户名&#x27;</span>@<span class="hljs-string">&#x27;主机名&#x27;</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;密码&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>修改用户密码：  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;用户名&#x27;</span>@<span class="hljs-string">&#x27;主机名&#x27;</span> IDENTIFIED <span class="hljs-keyword">WITH</span> mysql_native_password <span class="hljs-keyword">BY</span> <span class="hljs-string">&#x27;新密码&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>删除用户：  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">&#x27;用户名&#x27;</span>@<span class="hljs-string">&#x27;主机名&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- 创建用户test，只能在当前主机localhost访问<br>create user &#x27;test&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;;<br>-- 创建用户test，能在任意主机访问<br>create user &#x27;test&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27;;<br>create user &#x27;test&#x27; identified by &#x27;123456&#x27;;<br>-- 修改密码<br>alter user &#x27;test&#x27;@&#x27;localhost&#x27; identified with mysql_native_password by &#x27;1234&#x27;;<br>-- 删除用户<br>drop user &#x27;test&#x27;@&#x27;localhost&#x27;;<br></code></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<ul>
<li>主机名可以使用 % 通配</li>
</ul>
<p><strong>常用权限：</strong></p>
<table>
<thead>
<tr>
<th>权限</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ALL, ALL PRIVILEGES</td>
<td>所有权限</td>
</tr>
<tr>
<td>SELECT</td>
<td>查询数据</td>
</tr>
<tr>
<td>INSERT</td>
<td>插入数据</td>
</tr>
<tr>
<td>UPDATE</td>
<td>修改数据</td>
</tr>
<tr>
<td>DELETE</td>
<td>删除数据</td>
</tr>
<tr>
<td>ALTER</td>
<td>修改表</td>
</tr>
<tr>
<td>DROP</td>
<td>删除数据库&#x2F;表&#x2F;视图</td>
</tr>
<tr>
<td>CREATE</td>
<td>创建数据库&#x2F;表</td>
</tr>
</tbody></table>
<p>查询权限：  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> GRANTS <span class="hljs-keyword">FOR</span> <span class="hljs-string">&#x27;用户名&#x27;</span>@<span class="hljs-string">&#x27;主机名&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>授予权限：  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">GRANT</span> 权限列表 <span class="hljs-keyword">ON</span> 数据库名.表名 <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;用户名&#x27;</span>@<span class="hljs-string">&#x27;主机名&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>撤销权限：  </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">REVOKE</span> 权限列表 <span class="hljs-keyword">ON</span> 数据库名.表名 <span class="hljs-keyword">FROM</span> <span class="hljs-string">&#x27;用户名&#x27;</span>@<span class="hljs-string">&#x27;主机名&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<ul>
<li>多个权限用逗号分隔</li>
<li>授权时，数据库名和表名可以用 * 进行通配，代表所有</li>
</ul>
<h5 id="3-4-数据类型"><a href="#3-4-数据类型" class="headerlink" title="3.4 数据类型"></a>3.4 数据类型</h5><p><strong>整型</strong></p>
<table>
<thead>
<tr>
<th>类型名称</th>
<th>取值范围</th>
<th>大小</th>
</tr>
</thead>
<tbody><tr>
<td>TINYINT</td>
<td>-128〜127</td>
<td>1个字节</td>
</tr>
<tr>
<td>SMALLINT</td>
<td>-32768〜32767</td>
<td>2个宇节</td>
</tr>
<tr>
<td>MEDIUMINT</td>
<td>-8388608〜8388607</td>
<td>3个字节</td>
</tr>
<tr>
<td>INT (INTEGHR)</td>
<td>-2147483648〜2147483647</td>
<td>4个字节</td>
</tr>
<tr>
<td>BIGINT</td>
<td>-9223372036854775808〜9223372036854775807</td>
<td>8个字节</td>
</tr>
</tbody></table>
<p>无符号在数据类型后加 unsigned 关键字。</p>
<p><strong>浮点型</strong></p>
<table>
<thead>
<tr>
<th>类型名称</th>
<th>说明</th>
<th>存储需求</th>
</tr>
</thead>
<tbody><tr>
<td>FLOAT</td>
<td>单精度浮点数</td>
<td>4 个字节</td>
</tr>
<tr>
<td>DOUBLE</td>
<td>双精度浮点数</td>
<td>8 个字节</td>
</tr>
<tr>
<td>DECIMAL (M, D)，DEC</td>
<td>压缩的“严格”定点数</td>
<td>M+2 个字节</td>
</tr>
</tbody></table>
<p><strong>日期和时间</strong></p>
<table>
<thead>
<tr>
<th>类型名称</th>
<th>日期格式</th>
<th>日期范围</th>
<th>存储需求</th>
</tr>
</thead>
<tbody><tr>
<td>YEAR</td>
<td>YYYY</td>
<td>1901 ~ 2155</td>
<td>1 个字节</td>
</tr>
<tr>
<td>TIME</td>
<td>HH:MM:SS</td>
<td>-838:59:59 ~ 838:59:59</td>
<td>3 个字节</td>
</tr>
<tr>
<td>DATE</td>
<td>YYYY-MM-DD</td>
<td>1000-01-01 ~ 9999-12-3</td>
<td>3 个字节</td>
</tr>
<tr>
<td>DATETIME</td>
<td>YYYY-MM-DD HH:MM:SS</td>
<td>1000-01-01 00:00:00 ~ 9999-12-31 23:59:59</td>
<td>8 个字节</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>YYYY-MM-DD HH:MM:SS</td>
<td>1980-01-01 00:00:01 UTC ~ 2040-01-19 03:14:07 UTC</td>
<td>4 个字节</td>
</tr>
</tbody></table>
<p><strong>字符串</strong></p>
<table>
<thead>
<tr>
<th>类型名称</th>
<th>说明</th>
<th>存储需求</th>
</tr>
</thead>
<tbody><tr>
<td>CHAR(M)</td>
<td>固定长度非二进制字符串</td>
<td>M 字节，1&lt;&#x3D;M&lt;&#x3D;255</td>
</tr>
<tr>
<td>VARCHAR(M)</td>
<td>变长非二进制字符串</td>
<td>L+1字节，在此，L&lt; &#x3D; M和 1&lt;&#x3D;M&lt;&#x3D;255</td>
</tr>
<tr>
<td>TINYTEXT</td>
<td>非常小的非二进制字符串</td>
<td>L+1字节，在此，L&lt;2^8</td>
</tr>
<tr>
<td>TEXT</td>
<td>小的非二进制字符串</td>
<td>L+2字节，在此，L&lt;2^16</td>
</tr>
<tr>
<td>MEDIUMTEXT</td>
<td>中等大小的非二进制字符串</td>
<td>L+3字节，在此，L&lt;2^24</td>
</tr>
<tr>
<td>LONGTEXT</td>
<td>大的非二进制字符串</td>
<td>L+4字节，在此，L&lt;2^32</td>
</tr>
<tr>
<td>ENUM</td>
<td>枚举类型，只能有一个枚举字符串值</td>
<td>1或2个字节，取决于枚举值的数目 (最大值为65535)</td>
</tr>
<tr>
<td>SET</td>
<td>一个设置，字符串对象可以有零个或 多个SET成员</td>
<td>1、2、3、4或8个字节，取决于集合 成员的数量（最多64个成员）</td>
</tr>
</tbody></table>
<p><strong>二进制类型</strong></p>
<table>
<thead>
<tr>
<th>类型名称</th>
<th>说明</th>
<th>存储需求</th>
</tr>
</thead>
<tbody><tr>
<td>BIT(M)</td>
<td>位字段类型</td>
<td>大约 (M+7)&#x2F;8 字节</td>
</tr>
<tr>
<td>BINARY(M)</td>
<td>固定长度二进制字符串</td>
<td>M 字节</td>
</tr>
<tr>
<td>VARBINARY (M)</td>
<td>可变长度二进制字符串</td>
<td>M+1 字节</td>
</tr>
<tr>
<td>TINYBLOB (M)</td>
<td>非常小的BLOB</td>
<td>L+1 字节，在此，L&lt;2^8</td>
</tr>
<tr>
<td>BLOB (M)</td>
<td>小 BLOB</td>
<td>L+2 字节，在此，L&lt;2^16</td>
</tr>
<tr>
<td>MEDIUMBLOB (M)</td>
<td>中等大小的BLOB</td>
<td>L+3 字节，在此，L&lt;2^24</td>
</tr>
<tr>
<td>LONGBLOB (M)</td>
<td>非常大的BLOB</td>
<td>L+4 字节，在此，L&lt;2^32</td>
</tr>
</tbody></table>
<h5 id="3-5-约束"><a href="#3-5-约束" class="headerlink" title="3.5 约束"></a>3.5 约束</h5><ol>
<li>概念：约束是用来作用于表中字段上的规则，用于限制存储在表中的数据。</li>
<li>目的：保证数据库中的数据的正确、有效性和完整性</li>
</ol>
<p><strong>约束分类</strong></p>
<table>
<thead>
<tr>
<th>约束</th>
<th>描述</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>非空约束</td>
<td>限制该字段的数据不能为null</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>唯一约束</td>
<td>保证该字段的所有数据都是唯一、不重复的</td>
<td>UNIQUE</td>
</tr>
<tr>
<td>主键约束</td>
<td>主键是一行数据的唯一标识，要求非空且唯一</td>
<td>PRIMARY KEY</td>
</tr>
<tr>
<td>默认约束</td>
<td>保存数据时，如果未指定该字段的值，则采用默认值</td>
<td>DEFAULT</td>
</tr>
<tr>
<td>检查约束（8.0.1版本后）</td>
<td>保证字段值满足某一个条件</td>
<td>CHECK</td>
</tr>
<tr>
<td>外键约束</td>
<td>用来让两张图的数据之间建立连接，保证数据的一致性和完整性</td>
<td>FOREIGN KEY</td>
</tr>
</tbody></table>
<p><strong>常用约束</strong></p>
<table>
<thead>
<tr>
<th>约束条件</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>主键</td>
<td>PRIMARY KEY</td>
</tr>
<tr>
<td>自动增长</td>
<td>AUTO_INCREMENT</td>
</tr>
<tr>
<td>不为空</td>
<td>NOT NULL</td>
</tr>
<tr>
<td>唯一</td>
<td>UNIQUE</td>
</tr>
<tr>
<td>逻辑条件</td>
<td>CHECK</td>
</tr>
<tr>
<td>默认值</td>
<td>DEFAULT</td>
</tr>
</tbody></table>
<p><strong>外键约束</strong></p>
<p>​		外键用来让两张表的数据之间建立连接，从而保证数据的一致性和完整性。</p>
<p>添加外键</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> 表名(<br>	字段名 字段类型,<br>	...<br>	[<span class="hljs-keyword">CONSTRAINT</span>] [外键名称] <span class="hljs-keyword">FOREIGN</span> KEY(外键字段名) <span class="hljs-keyword">REFERENCES</span> 主表(主表列名)<br>);  <br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> 外键名称 <span class="hljs-keyword">FOREIGN</span> KEY (外键字段名) <span class="hljs-keyword">REFERENCES</span> 主表(主表列名);<br><br><span class="hljs-comment">-- 例子  </span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp <span class="hljs-keyword">add</span> <span class="hljs-keyword">constraint</span> fk_emp_dept_id <span class="hljs-keyword">foreign</span> key(dept_id) <span class="hljs-keyword">references</span> dept(id);  <br></code></pre></td></tr></table></figure>

<p>删除外键</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">FOREIGN</span> KEY 外键名;<br></code></pre></td></tr></table></figure>

<h3 id="四、其它数据库对象篇"><a href="#四、其它数据库对象篇" class="headerlink" title="四、其它数据库对象篇"></a>四、其它数据库对象篇</h3><h5 id="4-1视图"><a href="#4-1视图" class="headerlink" title="4.1视图"></a>4.1视图</h5><p>​		视图（View）是一种虚拟存在的表。视图中的数据并不在数据库中实际存在，行和列数据来自定义视图的查询中使用的表，并且是在使用视图时动态生成的。  </p>
<p>​		通俗的讲，视图只保存了查询的SQL逻辑，不保存查询结果。所以我们在创建视图的时候，主要的工作就落在创建这条SQL查询语句上。  </p>
<p><strong>创建视图</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> [ <span class="hljs-keyword">OR</span> REPLACE ] <span class="hljs-keyword">VIEW</span> 视图名称[（列名列表）] <span class="hljs-keyword">AS</span> <span class="hljs-keyword">SELECT</span> 语句 [ <span class="hljs-keyword">WITH</span> [ <span class="hljs-keyword">CASCADED</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">LOCAL</span> ] <span class="hljs-keyword">CHECK</span> OPTION ]<br>例:<span class="hljs-keyword">create</span> <span class="hljs-keyword">or</span> replace <span class="hljs-keyword">view</span> stu_wll <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> id,name <span class="hljs-keyword">from</span> student <span class="hljs-keyword">where</span> id<span class="hljs-operator">&lt;=</span><span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure>

<p><strong>查询视图</strong></p>
<p>查看创建视图语句： </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> 视图名称；  <br></code></pre></td></tr></table></figure>

<p>查看视图数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span><span class="hljs-operator">*</span><span class="hljs-keyword">FROM</span> 视图名称；  <br></code></pre></td></tr></table></figure>

<p><strong>修改视图</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">方式一：<span class="hljs-keyword">CREATE</span>[<span class="hljs-keyword">OR</span> REPLACE] <span class="hljs-keyword">VIEW</span> 视图名称[（列名列表)）] <span class="hljs-keyword">AS</span> <span class="hljs-keyword">SELECT</span> 语句[ <span class="hljs-keyword">WITH</span>[ <span class="hljs-keyword">CASCADED</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">LOCAL</span> ] <span class="hljs-keyword">CHECK</span> OPTION ]<br><br>方式二：<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">VIEW</span> 视图名称 [（列名列表)] <span class="hljs-keyword">AS</span> <span class="hljs-keyword">SELECT</span>语句 [<span class="hljs-keyword">WITH</span> [<span class="hljs-keyword">CASCADED</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">LOCAL</span>] <span class="hljs-keyword">CHECK</span> OPTION]<br></code></pre></td></tr></table></figure>

<p><strong>删除视图</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">VIEW</span> [IF <span class="hljs-keyword">EXISTS</span>] 视图名称 [视图名称]<br></code></pre></td></tr></table></figure>

<p><strong>更新及作用</strong></p>
<p>要使视图可更新，视图中的行与基础表中的行之间必须存在一对一的关系。如果视图包含以下任何一项，则该视图不可更新</p>
<ol>
<li>聚合函数或窗口函数 ( SUM()、MIN()、MAX()、COUNT() 等 )</li>
<li>DISTINCT</li>
<li>GROUP BY</li>
<li>HAVING</li>
<li>UNION 或者UNION ALL</li>
</ol>
<blockquote>
<p>例子： 使用了聚合函数，插入会失败。<br><code>create view stu_v_count as select count(*) from student;</code><br><code>insert into stu_v_count values(10);</code>  </p>
</blockquote>
<p>作用:</p>
<p>​		视图不仅可以简化用户对数据的理解，也可以简化他们的操作。那些被经常使用的查询可以被定义为视图，从而使得用户不必为以后的操作每次指定全部的条件。 </p>
<blockquote>
<p>安全<br>数据库可以授权，但不能授权到数据库特定行和特定的列上。通过视图用户只能查询和修改他们所能见到的数据<br>数据独立<br>视图可帮助用户屏蔽真实表结构变化带来的影响。  </p>
</blockquote>
<p>总而言之 类似于给表加上了一个外壳，通过这个外壳访问表的时候，<strong>只能按照所设计的方式进行访问与更新。</strong></p>
<h5 id="4-2存储过程"><a href="#4-2存储过程" class="headerlink" title="4.2存储过程"></a>4.2存储过程</h5><p>​		存储过程是事先经过编译并存储在数据库中的一段SQL 语句的集合，调用存储过程可以简化应用开发人员的很多工作，减少数据在数据库和应用服务器之间的传输，对于提高数据处理的效率是有好处的。<br>​		存储过程思想上很简单，<strong>就是数据库SQL 语言层面的代码封装与重用</strong>。</p>
<p>特点</p>
<ul>
<li>封装</li>
<li>复用</li>
<li>可以接收参数，也可以返回数据减少网络交互，效率提升</li>
</ul>
<p><strong>创建</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> 存储过程名称( [参数列表] ) <br><span class="hljs-keyword">BEGIN</span><br>	 <span class="hljs-keyword">SQL</span> 语句 <br><span class="hljs-keyword">END</span>;<br></code></pre></td></tr></table></figure>


<p>NOTE: 在命令行中，执行创建存储过程的SQL时，需要通过关键字delimiter 指定SQL语句的结束符。默认是 分号作为结束符。</p>
<p>delimiter $ ，则 $ 符作为结束符。</p>
<p><strong>调用</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CALL</span> 名称 ( [参数])<br></code></pre></td></tr></table></figure>

<p><strong>查看</strong></p>
<p>查询指定数据库的存储过程及状态信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span><span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> INFORMATION_SCHEMA.ROUTINES <span class="hljs-keyword">WHERE</span> ROUTINE_SCHEMA <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;xxx&#x27;</span> <br></code></pre></td></tr></table></figure>

<p>存储过程名称；–查询某个存储过程的定义</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span><br></code></pre></td></tr></table></figure>

<p><strong>删除</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PROCEDURE</span> [ IFEXISTS ] 存储过程名称<br></code></pre></td></tr></table></figure>

<p><strong>游标</strong></p>
<p>​		游标（CURSOR）是用来<strong>存储查询结果集的数据类型</strong>，在存储过程和函数中可以使用游标对结果集进行循环的处理。游标的使用包括游标的声明、OPEN、FETCH和CLOSE，其语法分别如下。</p>
<blockquote>
<p>声明游标：<br><code>DECLARE 游标名称 CURSOR FOR 查询语句</code></p>
</blockquote>
<blockquote>
<p>打开游标：<br><code>OPEN 游标名称</code></p>
</blockquote>
<blockquote>
<p>获取游标记录：<br><code>FETCH 游标名称INTO变量[变量]</code></p>
</blockquote>
<h5 id="4-3-触发器"><a href="#4-3-触发器" class="headerlink" title="4.3 触发器"></a>4.3 触发器</h5><p>​		触发器是与表有关的数据库对象，<strong>指在insert&#x2F;update&#x2F;delete之前或之后，触发并执行触发器中定义的SQL语句集合</strong>。触发器的这种特性可以协助应用在数据库端确保数据的完整性，日志记录，数据校验等操作。   </p>
<p>​		使用别名OLD和NEW来引用触发器中发生变化的记录内容，这与其他的数据库是相似的。现在触发器还只支持行级触发（比如说 一条语句影响了 5 行 则会被触发 5 次），不支持语句级触发（比如说 一条语句影响了 5 行 则会被触发 1 次）。  </p>
<table>
<thead>
<tr>
<th>触发器类型</th>
<th>NEW 和 OLD</th>
</tr>
</thead>
<tbody><tr>
<td>INSERT</td>
<td>NEW 表示将要或者已经新增的数据</td>
</tr>
<tr>
<td>UPDATE</td>
<td>OLD表示修改之前的数据，NEW表示将要或已经修改后的数据</td>
</tr>
<tr>
<td>DELETE</td>
<td>OLD表示将要或者已经删除的数据</td>
</tr>
</tbody></table>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/JAVA%E6%A0%B8%E5%BF%83%E5%9F%BA%E7%A1%80/" class="category-chain-item">JAVA核心基础</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>MySQL基础</div>
      <div>http://example.com/2023/04/03/MySQL基础/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>HK_2197</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年4月3日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/04/01/Java%E9%AB%98%E7%BA%A7/" title="JAVA高级">
                        <span class="hidden-mobile">JAVA高级</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
